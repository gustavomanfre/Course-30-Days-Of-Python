<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Memory Management</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #f5f5f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-width: 1400px;
            width: 100%;
        }
        h1 {
            text-align: center;
            margin-top: 0;
            font-size: 20px;
            color: #333;
        }
        svg {
            width: 100%;
            height: auto;
        }
        .code-box {
            background: #f8f8f8;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>PYTHON MEMORY MANAGEMENT: CORRECTED DICTIONARY REFERENCES (STACK & HEAP)</h1>
        
        <svg viewBox="0 0 1400 700" xmlns="http://www.w3.org/2000/svg">
            <!-- Definitions -->
            <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                    <polygon points="0 0, 10 3, 0 6" fill="#8b4789" />
                </marker>
            </defs>
            
            <!-- Garbage Collector -->
            <ellipse cx="500" cy="50" rx="120" ry="40" fill="#b3d9f2" stroke="#5a9fd4" stroke-width="2"/>
            <text x="500" y="58" text-anchor="middle" font-size="18" font-weight="bold">Garbage Collector</text>
            
            <!-- Stack Section -->
            <rect x="20" y="120" width="350" height="520" fill="#e8f5e9" stroke="#2e7d32" stroke-width="3"/>
            <text x="195" y="150" text-anchor="middle" font-size="22" font-weight="bold">Stack (Call Stack)</text>
            
            <!-- main() frame -->
            <rect x="40" y="170" width="310" height="450" fill="#c5e1a5" stroke="#558b2f" stroke-width="2"/>
            <text x="195" y="200" text-anchor="middle" font-size="18" font-weight="bold">main() frame</text>
            
            <!-- Variables frame -->
            <rect x="60" y="220" width="270" height="380" fill="#dcedc8" stroke="#7cb342" stroke-width="2"/>
            
            <!-- my_dict variable -->
            <text x="80" y="270" font-size="16" font-weight="bold">my_dict</text>
            <rect x="170" y="250" width="140" height="40" fill="#e1bee7" stroke="#8e24aa" stroke-width="2" rx="3"/>
            <circle cx="240" cy="270" r="5" fill="#8b4789"/>
            
            <!-- key_ref variable -->
            <text x="80" y="350" font-size="16" font-weight="bold">key_ref</text>
            <rect x="170" y="330" width="140" height="40" fill="#e1bee7" stroke="#8e24aa" stroke-width="2" rx="3"/>
            <circle cx="240" cy="350" r="5" fill="#8b4789"/>
            
            <!-- value_ref variable -->
            <text x="80" y="430" font-size="16" font-weight="bold">value_ref</text>
            <rect x="170" y="410" width="140" height="40" fill="#e1bee7" stroke="#8e24aa" stroke-width="2" rx="3"/>
            <circle cx="240" cy="430" r="5" fill="#8b4789"/>
            
            <!-- Heap Section -->
            <rect x="420" y="120" width="960" height="560" fill="#f1f8e9" stroke="#33691e" stroke-width="3"/>
            <text x="900" y="150" text-anchor="middle" font-size="22" font-weight="bold">Heap (Dynamic Memory)</text>
            
            <!-- Dictionary Object -->
            <rect x="440" y="180" width="480" height="340" fill="#c5e1a5" stroke="#558b2f" stroke-width="2"/>
            <text x="680" y="210" text-anchor="middle" font-size="18" font-weight="bold">Dictionary Object (PyDictObject)</text>
            
            <!-- Hash Table -->
            <rect x="460" y="230" width="280" height="150" fill="#dcedc8" stroke="#7cb342" stroke-width="2"/>
            <text x="600" y="255" text-anchor="middle" font-size="16" font-weight="bold">Hash Table (Sparse Array)</text>
            
            <!-- Hash table headers -->
            <rect x="470" y="265" width="80" height="35" fill="#aed581" stroke="#558b2f" stroke-width="1"/>
            <text x="510" y="287" text-anchor="middle" font-size="14" font-weight="bold">Index</text>
            
            <rect x="550" y="265" width="80" height="35" fill="#aed581" stroke="#558b2f" stroke-width="1"/>
            <text x="590" y="287" text-anchor="middle" font-size="14" font-weight="bold">Hash</text>
            
            <rect x="630" y="265" width="90" height="35" fill="#aed581" stroke="#558b2f" stroke-width="1"/>
            <text x="675" y="287" text-anchor="middle" font-size="14" font-weight="bold">...</text>
            
            <!-- Hash table rows -->
            <rect x="470" y="300" width="80" height="30" fill="white" stroke="#558b2f" stroke-width="1"/>
            <text x="510" y="320" text-anchor="middle" font-size="14">0</text>
            
            <rect x="550" y="300" width="80" height="30" fill="white" stroke="#558b2f" stroke-width="1"/>
            <text x="590" y="320" text-anchor="middle" font-size="14">31</text>
            
            <rect x="630" y="300" width="90" height="30" fill="white" stroke="#558b2f" stroke-width="1"/>
            
            <rect x="470" y="330" width="80" height="30" fill="white" stroke="#558b2f" stroke-width="1"/>
            <text x="510" y="350" text-anchor="middle" font-size="14">1</text>
            
            <rect x="550" y="330" width="80" height="30" fill="white" stroke="#558b2f" stroke-width="1"/>
            <text x="590" y="350" text-anchor="middle" font-size="14">32</text>
            
            <rect x="630" y="330" width="90" height="30" fill="white" stroke="#558b2f" stroke-width="1"/>
            
            <rect x="470" y="360" width="80" height="20" fill="white" stroke="#558b2f" stroke-width="1"/>
            <text x="510" y="374" text-anchor="middle" font-size="14">...</text>
            
            <rect x="550" y="360" width="80" height="20" fill="white" stroke="#558b2f" stroke-width="1"/>
            <text x="590" y="374" text-anchor="middle" font-size="14">...</text>
            
            <rect x="630" y="360" width="90" height="20" fill="white" stroke="#558b2f" stroke-width="1"/>
            <text x="675" y="374" text-anchor="middle" font-size="14">...</text>
            
            <!-- Key-Value Entries -->
            <rect x="460" y="395" width="440" height="110" fill="#dcedc8" stroke="#7cb342" stroke-width="2"/>
            <text x="680" y="420" text-anchor="middle" font-size="16" font-weight="bold">Key-Value Entries (Dense Array)</text>
            
            <!-- Entry headers -->
            <rect x="470" y="430" width="80" height="35" fill="#aed581" stroke="#558b2f" stroke-width="1"/>
            <text x="510" y="452" text-anchor="middle" font-size="14" font-weight="bold">Hash</text>
            
            <rect x="550" y="430" width="150" height="35" fill="#aed581" stroke="#558b2f" stroke-width="1"/>
            <text x="625" y="452" text-anchor="middle" font-size="14" font-weight="bold">Key Pointer</text>
            
            <rect x="700" y="430" width="180" height="35" fill="#aed581" stroke="#558b2f" stroke-width="1"/>
            <text x="790" y="452" text-anchor="middle" font-size="14" font-weight="bold">Value Pointer</text>
            
            <!-- Entry 1 (name: Alice) -->
            <rect x="470" y="465" width="80" height="30" fill="white" stroke="#558b2f" stroke-width="1"/>
            <text x="510" y="485" text-anchor="middle" font-size="14">31</text>
            
            <rect x="550" y="465" width="150" height="30" fill="white" stroke="#558b2f" stroke-width="1"/>
            <circle cx="625" cy="480" r="5" fill="#8b4789"/>
            
            <rect x="700" y="465" width="180" height="30" fill="white" stroke="#558b2f" stroke-width="1"/>
            <circle cx="790" cy="480" r="5" fill="#8b4789"/>
            
            <!-- Entry 2 (age: 30) -->
            <rect x="470" y="495" width="80" height="30" fill="white" stroke="#558b2f" stroke-width="1"/>
            <text x="510" y="515" text-anchor="middle" font-size="14">32</text>
            
            <rect x="550" y="495" width="150" height="30" fill="white" stroke="#558b2f" stroke-width="1"/>
            <circle cx="625" cy="510" r="5" fill="#8b4789"/>
            
            <rect x="700" y="495" width="180" height="30" fill="white" stroke="#558b2f" stroke-width="1"/>
            <circle cx="790" cy="510" r="5" fill="#8b4789"/>
            
            <!-- String Object: 'name' -->
            <rect x="530" y="560" width="180" height="50" fill="#bbdefb" stroke="#1976d2" stroke-width="2" rx="5"/>
            <rect x="535" y="565" width="170" height="40" fill="#e3f2fd" stroke="#1976d2" stroke-width="1" rx="3"/>
            <text x="620" y="590" text-anchor="middle" font-size="16" font-weight="bold">String Object: 'name'</text>
            
            <!-- String Object: 'age' -->
            <rect x="530" y="620" width="180" height="50" fill="#bbdefb" stroke="#1976d2" stroke-width="2" rx="5"/>
            <rect x="535" y="625" width="170" height="40" fill="#e3f2fd" stroke="#1976d2" stroke-width="1" rx="3"/>
            <text x="620" y="650" text-anchor="middle" font-size="16" font-weight="bold">String Object: 'age'</text>
            
            <!-- String Object: 'Alice' -->
            <rect x="1020" y="430" width="200" height="50" fill="#bbdefb" stroke="#1976d2" stroke-width="2" rx="5"/>
            <rect x="1025" y="435" width="190" height="40" fill="#e3f2fd" stroke="#1976d2" stroke-width="1" rx="3"/>
            <text x="1120" y="460" text-anchor="middle" font-size="16" font-weight="bold">String Object: 'Alice'</text>
            
            <!-- Integer Object: 30 -->
            <rect x="1020" y="500" width="200" height="50" fill="#c5cae9" stroke="#3f51b5" stroke-width="2" rx="5"/>
            <text x="1120" y="530" text-anchor="middle" font-size="16" font-weight="bold">Integer Object: 30</text>
            
            <!-- Arrows -->
            <!-- my_dict to Dictionary -->
            <path d="M 310 270 L 440 270" stroke="#8b4789" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
            
            <!-- key_ref to 'age' (CORREGIDO) -->
            <path d="M 240 350 Q 380 500 530 645" stroke="#8b4789" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
            
            <!-- value_ref to 'Alice' -->
            <path d="M 240 430 Q 380 430 1020 455" stroke="#8b4789" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
            
            <!-- Key pointer (name) to 'name' string -->
            <path d="M 625 480 L 620 560" stroke="#8b4789" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
            
            <!-- Key pointer (age) to 'age' string -->
            <path d="M 625 510 L 620 620" stroke="#8b4789" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
            
            <!-- Value pointer (Alice) to 'Alice' string -->
            <path d="M 880 480 Q 950 455 1020 455" stroke="#8b4789" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
            
            <!-- Value pointer (30) to Integer 30 -->
            <path d="M 880 510 Q 950 515 1020 525" stroke="#8b4789" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
        </svg>
        
        <div class="code-box">
            <strong>Código:</strong><br>
            my_dict = {<br>
            &nbsp;&nbsp;&nbsp;&nbsp;'name': 'Alice',<br>
            &nbsp;&nbsp;&nbsp;&nbsp;'age': 30<br>
            }<br>
            key_ref = 'age'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# ✅ Ahora apunta correctamente a 'age'<br>
            value_ref = my_dict['name']
        </div>
    </div>
</body>
</html>